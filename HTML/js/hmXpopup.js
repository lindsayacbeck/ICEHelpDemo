/*! Help & Manual WebHelp 3 Script functions
Copyright (c) 2014 - 2015 by Tim Green. All rights reserved. Contact tg@it-authoring.com
*/
function xPopup(){var e=this,n={},p={},L={},z=false;function o(W){if(W.substr(0,1)==="#"){return W}var Z=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(W);var aa=parseInt(Z[2]);var Y=parseInt(Z[3]);var V=parseInt(Z[4]);var X=V|(Y<<8)|(aa<<16);return Z[1]+"#"+X.toString(16)}function R(aa){aa.preventDefault();var V=parseInt($("#hmpopupdiv").css("borderWidth"),10);var ab=$("#hmpopupdiv").offset();var Z=$("#hmpopupdiv").outerWidth()-(20+V);var W=$("#hmpopupdiv").outerHeight()-(20+V);var Y=aa.pageX-ab.left;var X=aa.pageY-ab.top;if(Y>Z||X>W){z=true;$("#hmpopupdiv").css("cursor","auto")}else{z=false;$("#hmpopupdiv").css("cursor","move")}}e.hmKillPopup=function(V){z=false;var W=document.getElementById("hmpopupdiv");if($("div#navigationmenu").is(":visible")){hmWebHelp.hamburgerMenu()}if(W.style.visibility==="visible"){if(p.isvideo){if(V){$("#vidbg").fadeOut("slow",function(){if(n.killVideo){location.reload()}})}else{$("#vidbg").hide();if(n.killVideo){location.reload()}}}$(W).hide((V?"fast":0),function(){$(W).unbind("mousemove.scrBar").css({visibility:"hidden",display:"block",width:"auto",height:"auto",top:"0px",left:"0px",cursor:"default"});p.isvideo=false;p.smallPopup=false;p.bdDrag=false;try{f(document,"mousedown",r);f(document,"mousedown",N);f(document,"mouseup",k);$("img").unbind("mousedown.imagebug").unbind("drag.imagebug");$("body").unbind("mousemove.popup").unbind("mousedown.cursorbug").unbind("drag.cursorbug")}catch(X){}$("div#hmpopupdiv").html("").removeClass()})}};function r(Z){var W=false;var Y=(!p.is_ie)?Z.target:event.srcElement;var X=$(window).width(),aa=$(window).height();if(!p.is_ie||(p.is_ie&&p.is_ns)){X=X-20;aa=aa-20}var V=Y.id;do{V=Y.id;if(V&&V=="hmpopupdiv"){W=true}Y=Y.parentNode}while(V!=="hmpopupdiv"&&Y.parentNode);if(W){return false}else{if((Z.clientX>X)||(Z.clientY>aa)||p.bdDrag){return false}e.hmKillPopup(true);return false}}function a(V){return V.toString(16)}function B(V){return parseInt(V,16)}function D(V){return(V.length==1)?"0"+V:V}function T(V){return V>240?240:V<0?0:V}function C(V){var X,W,Y;X=D(a(T(V+y)));W=D(a(T(V+F)));Y=D(a(T(V+M)));return"#"+X+W+Y}function J(X,W,V){if(X.attachEvent){X["e"+W+V]=V;X[W+V]=function(){X["e"+W+V](window.event)};X.attachEvent("on"+W,X[W+V])}else{X.addEventListener(W,V,false)}}function f(X,W,V){if(X.detachEvent){X.detachEvent("on"+W,X[W+V]);X[W+V]=null;X["e"+W+V]=null}else{X.removeEventListener(W,V,false)}}function N(Y){var W=(!p.is_ie)?Y.target:event.srcElement;var V=W.id;if(V!="hmpopupdiv"){for(var X=W;((X.id=="hmpopupdiv"||!X.id)&&X.parentNode);X=X.parentNode){V=X.id;if(V=="hmpopupdiv"){break}}}if(p.bdDrag&&!p.isvideo){j(document.body,true);E=true;p.reSize=$("body").css("cursor");I=(!p.is_ie)?Y.clientX:event.clientX;H=(!p.is_ie)?Y.clientY:event.clientY;K=parseInt(L.style.width,10);Q=parseInt(L.style.height,10);J(document,"mousemove",O);return false}if(V=="hmpopupdiv"&&!z&&!p.isvideo){j(document.body,true);h=true;l=parseInt(L.style.left,10);x=parseInt(L.style.top,10);I=(!p.is_ie)?Y.clientX:event.clientX;H=(!p.is_ie)?Y.clientY:event.clientY;if((((I-$(L).position().left)<($(L).width()-14))||(L.clientHeight>=L.scrollHeight))&&((H-$(L).position().top)<($(L).height()-14)||(L.clientWidth>=L.scrollWidth))){J(document,"mousemove",m)}return false}}function k(){if(h){h=false;z=false;if(p.is_ie){L.style.removeAttribute("filter");L.style.removeAttribute("zoom")}else{L.style.opacity="1.0"}f(document,"mousemove",m);j(document.body,false)}else{if(E){E=false;f(document,"mousemove",O);j(document.body,false);L.style.overflow="auto"}}return false}function s(){if(window.getSelection){window.getSelection().removeAllRanges()}else{if(document.selection){document.selection.empty()}}return false}function j(V,W){function X(){return false}if(W){if(p.is_ie){J(V,"selectstart",X)}else{if(typeof V.style.MozUserSelect!="undefined"){V.style.MozUserSelect="none"}else{J(V,"mousedown",X)}}}else{if(p.is_ie){f(V,"selectstart",X)}else{if(typeof V.style.MozUserSelect!="undefined"){V.style.MozUserSelect="elements"}else{f(V,"mousedown",X)}}}}function m(X){var W=(!p.is_ie)?X.clientX-I:event.clientX-I;var V=(!p.is_ie)?X.clientY-H:event.clientY-H;if(h){L.style.left=l+W+"px";L.style.top=x+V+"px";if(p.is_ie){L.style.zoom="1";L.style.filter="alpha(opacity=40)"}else{L.style.opacity="0.4"}s();return false}}function O(X){var W=(!p.is_ie)?X.clientX-I:event.clientX-I;var V=(!p.is_ie)?X.clientY-H:event.clientY-H;if(E){if(K+W>130&&(p.reSize=="nw-resize"||p.reSize==p.ewResize)){L.style.width=(K+W)+"px"}if(Q+V>70&&(p.reSize=="nw-resize"||p.reSize==p.nsResize)){L.style.height=(Q+V)+"px"}$("body").css("cursor",p.reSize);L.style.overflow="hidden";s();return false}}function G(aa,ac,Y){if(ac){ac()}if($("div#navigationmenu").is(":visible")){hmWebHelp.hamburgerMenu()}U=false;L=document.getElementById("hmpopupdiv");aa=aa?aa:window.event;var ae=aa.clientX;var ad=aa.clientY;var Z=$("body").scrollLeft();var W=$("body").scrollTop();var af=$(window).width();var ab=$(window).height();var X=$(L).outerWidth();var V=$(L).outerHeight();L.style.padding=A+"px";L.style.borderColor=b+" "+v+" "+t+" "+g;L.style.left="0px";L.style.top="0px";if(!p.iequirks){$(L).css({height:$(L).height()+"px",width:$(L).width()+"px"})}else{$(L).css({height:$(L).outerHeight()+"px",width:$(L).outerWidth()+"px"})}V=$(L).outerHeight();X=$(L).outerWidth();if(!Y){if(!p.isvideo){if(X>(Math.round(af*0.3))){L.style.width=p.iequirks?Math.round(af*0.3)+"px":((Math.round(af*0.3)-(2*q+2*A)))+"px";X=$(L).outerWidth()}if(V>(Math.round(ab*0.3))){L.style.height=p.iequirks?Math.round(ab*0.3)+"px":((Math.round(ab*0.3)-(2*q+2*A)))+"px";V=$(L).outerHeight()}else{if(L.scrollHeight>L.clientHeight){if(!p.iequirks){L.style.height=($(L).height()+(L.scrollHeight-L.clientHeight))+"px"}else{L.style.height=($(L).outerHeight()+(L.scrollHeight-L.clientHeight))+"px"}}}}if((ae+X)>(af-40)){L.style.left=(ae-((ae+X)-(af-40)))+"px";if(parseInt(L.style.left,10)<10){L.style.left="10px"}}else{L.style.left=(ae)+"px"}if((ad+V)>(ab-40)){L.style.top=(ad-((ad+V)-(ab-40)))+"px";if(parseInt(L.style.top,10)<10){L.style.top="10px"}}else{L.style.top=(ad)+"px"}if(p.is_ie&&!p.ie9&&!hmHeaderTopic){L.style.top=(parseInt(L.style.top,10)+$(window).scrollTop())+"px"}}if(!p.isvideo){J(document,"mousedown",N);J(document,"mouseup",k)}J(document,"mousedown",r);if(!p.isvideo){L.style.position=((!p.is_ie&&!p.is_chm)||p.ie9)?"fixed":"absolute"}if(Y){L.style.width=Y[0];L.style.height=Y[1];L.style.left=Y[2];L.style.top=Y[3]}if($(L).width()+$(L).height()<n.smallDim){if(!p.isvideo){L.style.cursor="move"}p.smallPopup=true}else{p.smallPopup=false;if(!p.isvideo){$("#hmpopupdiv").bind("mousemove.scrBar",R)}}if(Y&&Y[4]=="small"){p.smallPopup=true}else{if(Y&&Y[4]=="large"){p.smallPopup=false}}if(Y&&typeof Y[5]=="string"){L.className=Y[5]}L.style.overflow="auto";$(L).css({display:"none",visibility:"visible"});$(L).show("fast");if(p.isvideo){$("body").append('<div id="vidbg" style="background-color: #000000; opacity:0.5;filter:alpha(opacity=50); z-index:800; position: absolute; top: 0; left:0; height: 100%; width: 100%; display:none;"></div>');$("#vidbg").fadeIn("slow")}if(!p.isvideo){$("img").bind("mousedown.imagebug",function(ag){ag.preventDefault()}).bind("drag.imagebug",function(ag){ag.preventDefault()});$("body").bind("mousedown.cursorbug",function(ag){ag.preventDefault()}).bind("drag.cursorbug",function(ag){ag.preventDefault()})}if(!p.smallPopup&&!p.isvideo){$("body").bind("mousemove.popup",function(am){var ak=$(L).position();var al=$(L).outerWidth();var aj=$(L).outerHeight();var ah=((am.pageX>(ak.left+(al-4)))&&(am.pageX<(ak.left+al+8))&&(am.pageY>ak.top)&&(am.pageY<ak.top+ +aj+8));var ag=((am.pageY>(ak.top+(aj-4-q)))&&(am.pageY<(ak.top+aj+8))&&(am.pageX<(ak.left+al+8))&&(am.pageX>ak.left+4));var ai=((ah&&(am.pageY>(ak.top+aj-10)))||(ag&&am.pageX>(ak.left+al-10)));p.bdDrag=ah||ag;$("body").css("cursor",function(){return ai?"nw-resize":ah&&!ag?p.ewResize:ag&&!ah?p.nsResize:"auto"});if(p.is_webkit){$(L).css("cursor",function(){var an=((am.pageX>ak.left)&&(am.pageX<(ak.left+(al-20)))&&(am.pageY>ak.top)&&(am.pageY<(ak.top+(aj-20))));return ai?"nw-resize":ah&&!ag?p.ewResize:ag&&!ah?p.nsResize:an?"move":"auto"})}})}}if($("div#hmpopupdiv").length<1){$("body").append('<div id="hmpopupdiv" />')}$("div#hmpopupdiv").css({visibility:"hidden",display:"block",width:"auto",overflow:"auto"});p.ua=navigator.userAgent.toLowerCase();p.dom=(document.getElementById)?true:false;p.ie9=(((p.ua.indexOf("msie 9")>=0)||(p.ua.indexOf("msie 10")>=0))&&(p.ua.indexOf("opera")<0));p.is_ie=((p.ua.indexOf("msie")>=0)&&(p.ua.indexOf("opera")<0));p.is_webkit=p.ua.indexOf("webkit")>0;p.iequirks=(p.is_ie)&&(document.compatMode.toLowerCase()=="backcompat");p.is_ff=((p.ua.indexOf("firefox")>=0)&&(!p.is_ie)&&(p.ua.indexOf("opera")<0));p.is_chm=(location.href.search("::")>=0);p.is_ns=document.getElementById("innerdiv")?true:false;p.offsxy=6;p.isvideo=false;p.smallPopup=false;p.bdDrag=false;p.reSize="nw-resize";p.ewResize=(!p.is_ie&&!p.is_chm)?"ew-resize":"e-resize";p.nsResize=(!p.is_ie&&!p.is_chm)?"ns-resize":"s-resize";p.popclick=false;n.bWidth=parseInt($("div#hmpopupdiv").css("border-left-width"),10);n.pPadding=parseInt($("div#hmpopupdiv").css("paddingTop"),10);n.pbgColor=o($("div#hmpopupdiv").css("background-color"));n.bdColor=o($("div#hmpopupdiv").css("border-left-color")).replace("#","");n.smallDim=window.hmPopSmallDim;n.killVideo=window.hmPopKillVideo;var h=false,E=false,U=false,S=false,I=0,H=0,l=0,x=0,d=0,i=0,K=0,Q=0;var q=n.bWidth,A=n.pPadding,w=n.pbgColor,c=n.bdColor,y,F,M,b,v,t,g,u=window.hmpBShadow,P=n.smallDim?n.smallDim:500;if(P<500){P=500}e.hmCallPopup=function(ab){var Z=ab[0],V=ab[1],W=ab[2],aa=ab[3]?ab[3]:false,X=ab[4]?ab[4]:false;$("div#hmpopupdiv, #vidbg").stop(false,true);e.hmKillPopup(false);$("#vidbg").remove();if(!u){t=b=g=v="#"+a(c)}else{y=B(c.substring(0,2));F=B(c.substring(2,4));M=B(c.substring(4,6));t=C(0);v=C(20);b=C(180);g=C(180)}p.isvideo=/<object[\s\S]*?(\.swf|\.flv|\.avi|\.mpg|\.mov|\.ram|\.mp4|\.mkv|\.m4v|\.wmv|\.divx|\.dvr-ms|\.f4v|\.fli|\.m2p|\.mpeg|\.mpeg4|\.ogm|\.ogv|\.ogx|\.xvid)[\s\S]*?<\/object>/im.test(V);var Y=$("div#hmpopupdiv");$(Y).html(V);G(Z,aa,X)}}hmWebHelp.xPopup=new xPopup();hmWebHelp.funcs.hmXpopup=hmWebHelp.xPopup.hmCallPopup;
